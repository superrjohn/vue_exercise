<!DOCTYPE html>
<html>
<head><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="./bootstrap5/css/bootstrap.rtl.css" rel="stylesheet"/>
<script src="./bootstrap5/js/bootstrap.bundle.js"></script>
<link rel='icon' href=''>
<!--引入圖標-->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
<script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
<!--axios-->
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>
<title>vue模擬購物車</title>
<style>
*{margin: 0;padding: 0;}
	table{margin:10px auto}
	th,td{border:1px solid;padding:10px;}
	button{width:20px;height:20px;line-height:20px;text-align:center;}
	.del{width:40px;height:40px}
</style>
<body>
	<div id='app'>
		<table v-if='book.length'>
			<tr>
				<th>書名</th>
				<th>出版日期</th>
				<th>價錢</th>
				<th>數量</th>
				<th>操作</th>
			</tr>
			<tr v-for='(item,index) in book'>
				<td>{{item.name}}</td>
				<td>{{item.date}}</td>
				</td>
				<td>{{item.price}}</td>
				<td>
					<button @click='sub(index)'>-</button>
				<span>{{item.mun}}</span>
					<button @click='add(index)'>+</button>
				</td>
				<td><button class='del' @click='remove(index)'>刪除</button></td>
			</tr>
			<tr>
				<td colspan="5">{{totlePrice}}</td>
			</tr>
		</table>
		<h2 v-else>購物車為空</h2>
	</div>
<script>
	let app=new Vue({
		el:'#app',
		data:{
			book:[{name:'<<算法說明>>',
				   date:'2006-9',
				   price:85,
				   mun:1},
				   {name:'<<UNIX>>',
				   date:'2006-2',
				   price:100,
				   mun:1},
				   {name:'<<大哥>>',
				   date:'2009-2',
				   price:95,
				   mun:1}, 
				   {name:'<<哈哈哈>>',
				   date:'2002-2',
				   price:68,
				   mun:1}],
				   
		},
		methods:{
			sub:function(index){
				if(this.book[index].mun>0){
				this.book[index].mun--;
				console.log(index)}
			},
			add:function(index){
				this.book[index].mun++;
			},
			remove(index){
			this.book.splice(index,1);
			},
			
				
		},
		computed:{
		totlePrice(){
				return this.book.reduce(function(preValue,book){
				return preValue +book.price*book.mun},0)
		}
		},
})
const nums=[10,20,100,102,40]
/*let newNum=nums.filter(function(i){
return i<100 })
console.log(newNum);
let new2=newNum.map(function(i){
return i*2})
console.log(new2)
let totle=new2.reduce(function(pre,n){
return pre+n;},0)
console.log(totle); */
/*let newNum=nums.filter(function(n){return n<100})
.map(function(n){return n*2})
.reduce(function(pre,n){return pre+n},0);
console.log(newNum)  */
let totle=nums.filter(n=> n<100).map(n=> n*2).reduce((pre,n)=> pre+n);
console.log(totle)
</script>
</body>
</html>
